<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chi Tiáº¿t Sáº£n Pháº©m</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="productDetail.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

  <header class="navbar">
  <div class="logo" onclick="location.href='index.html'">NhÃ  Má»™c MiÃªn</div>

  <nav>
    <ul class="nav-links">
    </ul>
  </nav>

  <div class="icons">
    <a href="https://www.facebook.com/nhamocmienn" target="_blank"><i class="fab fa-facebook"></i></a>
    <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
    <a href="cart.html"><i class="fas fa-shopping-cart"></i></a>
  </div>
</header>


  <div class="product-detail">
    <div class="left-column">
      <img id="mainImage" class="main-image" src="">
      <div id="subImages" class="sub-image-row"></div>
    </div>

    <div class="right-column">
      <h2 id="productTitle">TÃªn sáº£n pháº©m</h2>
      <div class="price-range" id="mainPrice">260,000Ä‘ - 289,000Ä‘</div>
    

      <div class="gift-set-selection">
        <label>Chá»n loáº¡i sáº£n pháº©m:</label>
        <div class="radio-group">
          <label><input type="radio" name="productTypeOption" value="set" checked> Set quÃ  </label>
          <label><input type="radio" name="productTypeOption" value="only-clothes"> Chá»‰ quáº§n Ã¡o</label>
        </div>
      </div>

      <div class="size-section">
        <label>Size:</label>
        <div class="size-options" id="sizeOptions"></div>
      </div>

      <div class="quantity-section">
        <label>Sá»‘ lÆ°á»£ng:</label>
        <button onclick="adjustQuantity(-1)" >-</button>
        <span id="quantity">1</span>
        <button onclick="adjustQuantity(1)">+</button>
      </div>

      <p class="freeship">Freeship khu vá»±c HÃ²a Láº¡c, ná»™i thÃ nh HÃ  Ná»™i</p>

      <div class="buttons">
        <button id="addToCartBtn" class="add-to-cart">ğŸ›’ THÃŠM VÃ€O GIá»</button>
        <!-- <button class="buy-now">MUA NGAY</button> -->
      </div>
    </div>
  </div>

  <div class="product-description">
  <h3>MÃ´ táº£ sáº£n pháº©m</h3>
  <div class="desc-block">
    <p>ğŸ’– Ai rá»“i cÅ©ng pháº£i bá»‹ "say náº¯ng" má»™t láº§n trong Ä‘á»i. NÃ ng bá»—ng cÆ°á»i, tim ta kháº½ láº¡c nhá»‹p, TÆ°Æ¡ng tÆ° thÃ¬ dáº§n lá»›n, cÃ²n lá»i yÃªu ngáº¡i ngÃ¹ng mÃ£i chÆ°a dÃ¡m cáº¥t lÃªn! NhÆ°ng cÃ¡c cao thá»§ tÃ¬nh yÃªu Ä‘Ã£ dáº·n: â€œHÃ nh Ä‘á»™ng luÃ´n lÃ£ng máº¡n hÆ¡n lá»i nÃ³iâ€.</p>

    <p>Váº­y nÃªn NhÃ  Má»™c MiÃªn mÃ¡ch cho ae set quÃ  táº·ng nÃ y tÃªn lÃ  â€œDá»‹uâ€ â€“ tá»±a nhÆ° lá»i thÃ¬ tháº§m tinh táº¿ nÃ³i thay táº¥m chÃ¢n tÃ¬nh, giÃºp ae ghi Ä‘iá»ƒm tuyá»‡t Ä‘á»‘i trong máº¯t crush nhÃ¡.</p>

    <p>ğŸ’ Set bao gá»“m:<br>
    â€¢ 1 bá»™ lá»¥a má»m máº¡i, dá»‹u dÃ ng vá»›i cáº£ lÃ n da nháº¡y cáº£m, ai máº·c cÅ©ng pháº£i mÃª<br>
    â€¢ 1 thiá»‡p viáº¿t tay Ä‘ong Ä‘áº§y cáº£m xÃºc<br>
    â€¢ 1 lÆ°á»£c gá»— tráº§m hÆ°Æ¡ng massage thÆ° giÃ£n giÃºp crush giáº£i tá»a cÄƒng tháº³ng<br>
    Táº¥t cáº£ Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i tá»‰ má»‰ trong há»™p quÃ  xinh yÃªu.</p>

    <p>ğŸ’Œ Äá»«ng Ä‘á»ƒ Ä‘á»‘i thá»§ nhanh chÃ¢n tá» tÃ¬nh trÆ°á»›c â€“ Ä‘áº·t hÃ ng ngay káº»o áº¿ dÃ i dÃ i lÃ  khÃ´ng cÃ³ kÃªu nha!</p>

    <hr>
    <p><strong>Má»i tháº¯c máº¯c xin liÃªn há»‡:</strong><br>
    Facebook: NhÃ  Má»™c MiÃªn<br>
    Instagram: @nhamocmien<br>
    Hotline: 0345324233</p>
  </div>
</div>


  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCR6ChodbxTFeMqVEfc37LGMZn0sRKyl-k",
      authDomain: "loichucyeuthuong18.firebaseapp.com",
      projectId: "loichucyeuthuong18",
      storageBucket: "loichucyeuthuong18.appspot.com",
      messagingSenderId: "434140825017",
      appId: "1:434140825017:web:13deda5e05e22fe2f76268"
    };
    firebase.initializeApp(firebaseConfig);

    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');
    const db = firebase.database();

    db.ref(`products/${productId}`).once("value").then(snapshot => {
      const product = snapshot.val();
      if (!product) return;

      document.getElementById("productTitle").textContent = product.name;
      document.getElementById("mainPrice").textContent = parseInt(product.price).toLocaleString() + 'Ä‘';
   
      //document.getElementById("productDesc").textContent = product.detailDesc || product.desc || "ChÆ°a cÃ³ mÃ´ táº£.";

      const images = product.images || [];
      document.getElementById("mainImage").src = images[0] || 'https://via.placeholder.com/250x200?text=No+Image';

      document.getElementById("subImages").innerHTML = images.map(img => `
        <img src="${img}" onclick="document.getElementById('mainImage').src='${img}'">
      `).join("");

      const sizeContainer = document.getElementById("sizeOptions");
      const sizes = ["S", "M", "L", "XL"];
      sizes.forEach(size => {
        const qty = product.quantity?.[size] ?? 0;
        const btn = document.createElement("button");
        btn.textContent = size;
        btn.disabled = qty <= 0;
        if (qty <= 0) btn.classList.add("disabled");
        sizeContainer.appendChild(btn);
      });
    });

    function adjustQuantity(delta) {
      const span = document.getElementById("quantity");
      let qty = parseInt(span.textContent);
      qty = Math.max(1, qty + delta);
      span.textContent = qty;
    }
  </script>


    <!-- xá»­ lÃ½ button chá»n loáº¡i sáº£n pháº©m -->
    <script>
    const productTypeRadios = document.getElementsByName("productTypeOption");

    productTypeRadios.forEach(radio => {
      radio.addEventListener("change", () => {
        const selected = document.querySelector('input[name="productTypeOption"]:checked').value;
        if (selected === "only-clothes") {
          document.getElementById("mainPrice").textContent = "260,000Ä‘"; // vÃ­ dá»¥
        } else {
          document.getElementById("mainPrice").textContent = "289,000Ä‘";
        }
      });
    });
  </script>

  <!-- xá»­ lÃ½ giá» hÃ ng -->
      <script>
        document.getElementById("addToCartBtn").addEventListener("click", () => {
        const title = document.getElementById("productTitle").textContent;
        const priceText = document.getElementById("mainPrice").textContent;
        const price = parseInt(priceText.replace(/\D/g, ''));
        const quantity = parseInt(document.getElementById("quantity").textContent);
        const selectedSizeBtn = document.querySelector("#sizeOptions button.selected");

        if (!selectedSizeBtn) {
          alert("Vui lÃ²ng chá»n size trÆ°á»›c khi thÃªm vÃ o giá» hÃ ng!");
          return;
        }

        const size = selectedSizeBtn.textContent;
        const image = document.getElementById("mainImage").src;
        const productOption = document.querySelector('input[name="productTypeOption"]:checked')?.value || "set";

        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const existingItem = cart.find(item => item.title === title && item.size === size && item.productOption === productOption);

        if (existingItem) {
          existingItem.quantity += quantity;
          existingItem.total = existingItem.quantity * existingItem.price;
        } else {
          const cartItem = {
            title,
            price,
            quantity,
            size,
            image,
            total: price * quantity,
            productOption,
            customer: {
              name: "",
              phone: "",
              address: "",
              zaloOrEmail: "",
              fbLink: "",
              payment: ""
            }
          };
          cart.push(cartItem);
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        alert("ÄÃ£ thÃªm vÃ o giá» hÃ ng!");
      });

    </script>

      <script>
        document.getElementById("sizeOptions").addEventListener("click", (e) => {
        if (e.target.tagName === "BUTTON" && !e.target.disabled) {
          document.querySelectorAll("#sizeOptions button").forEach(btn => btn.classList.remove("selected"));
          e.target.classList.add("selected");
        }
      });

      </script>

      <script>
    document.getElementById("sizeOptions").addEventListener("click", (e) => {
      if (e.target.tagName === "BUTTON" && !e.target.disabled) {
        document.querySelectorAll("#sizeOptions button").forEach(btn => btn.classList.remove("selected"));
        e.target.classList.add("selected");
      }
    });
  </script>

</body>
</html>
