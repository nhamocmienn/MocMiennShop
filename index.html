<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>NhÃ  Má»™c MiÃªn</title>
  <link rel="stylesheet" href="style.css">
  <!-- ThÆ° viá»‡n icon -->
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <!-- Menu cá»‘ Ä‘á»‹nh -->
  <header class="navbar">
  <div class="logo">NhÃ  Má»™c MiÃªn</div>

  <nav>
    <ul class="nav-links">
      <li><a href="#gioithieu">GIá»šI THIá»†U</a></li>
      <li><a href="#setqua">SET QUÃ€</a></li>
      <li><a href="#guithuthandan">Gá»¬I THÆ¯ áº¨N DANH</a></li>
      <li><a href="#feedback">FEEDBACK</a></li>
    </ul>
  </nav>

  <div class="icons">
    <a href="https://www.facebook.com/nhamocmienn" target="_blank"><i class="fab fa-facebook"></i></a>
    <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
   <a href="cart.html"><i class="fas fa-shopping-cart"></i></a>
  </div>
</header>


  <!-- CÃ¡c section ná»™i dung -->
  <section id="gioithieu" class="section gioi-thieu">
  <div class="gioi-thieu-container">
    <!-- Cá»™t áº£nh trÃ¡i -->
    <!-- Cá»™t áº£nh trÃ¡i -->
<div class="gioi-thieu-images">
  <div class="img-vertical">
    <img src="img/doc.png" alt="áº¢nh chÃ­nh">
  </div>
  <div class="img-stack">
    <div class="img-small">
      <img src="img/nho1.png" alt="áº¢nh phá»¥ 1">
    </div>
    <div class="img-small">
      <img src="img/nho2.png" alt="áº¢nh phá»¥ 2">
    </div>
  </div>
</div>



    <!-- Ná»™i dung bÃªn pháº£i -->
    <div class="gioi-thieu-content">
      <h2 class="slogan">â€œÄiá»u thÆ°Æ¡ng chÆ°a dÃ¡m nÃ³iâ€</h2>
      <p class="title"><strong>NhÃ  Má»™c MiÃªn - Trang phá»¥c khÃ´ng chá»‰ Ä‘á»ƒ máº·c</strong></p>
      <p class="desc">
        Báº±ng má»™t tÃ¬nh yÃªu vÃ  sá»± tÃ´n kÃ­nh Ä‘áº·c biá»‡t dÃ nh cho nhá»¯ng ngÆ°á»i phá»¥ ná»¯ Viá»‡t Nam, NhÃ  Má»™c MiÃªn mang Ä‘áº¿n nhá»¯ng mÃ³n quÃ  má»m máº¡i khÃ´ng chá»‰ mang láº¡i sá»± thoáº£i mÃ¡i, dá»‹u dÃ ng cho ngÆ°á»i máº·c, mÃ  cÃ²n kháº½ gá»­i gáº¯m nhá»¯ng tÃ¬nh cáº£m yÃªu thÆ°Æ¡ng vÃ  trÃ¢n trá»ng dáº«u Ä‘Ã£ kháº¯c sÃ¢u trong tim ngÆ°á»i gá»­i nhÆ°ng ngáº¡i chÆ°a dÃ¡m nÃ³i thÃ nh lá»i.
      </p>
      <a href="#setqua" class="xem-them">XEM THÃŠM</a>
    </div>
  </div>
</section>



  <section id="setqua" class="section set-qua">
  <h2 class="section-title">Set bÃ¡n cháº¡y nháº¥t</h2>

  <div class="slider-wrapper">
    <button class="nav-btn left" onclick="scrollToLeft()"><i class="fas fa-chevron-left"></i></button>

    <div class="scroll-container" id="productList">
      <!-- Sáº£n pháº©m sáº½ Ä‘Æ°á»£c Ä‘á»• tá»« Firebase -->
    </div>

    <button class="nav-btn right" onclick="scrollToRight()"><i class="fas fa-chevron-right"></i></button>
  </div>
  </section>



  <section id="guithuthandan" class="section guithuthandan">
  <div class="message-container">
    <div class="message-left">
      <h2 class="message-title">Há»™p thÆ° yÃªu thÆ°Æ¡ng</h2>
      <div class="intro-image-placeholder">
        <img src="img/thu.png" alt="áº¢nh há»™p thÆ° yÃªu thÆ°Æ¡ng">
       </div>
      <p>KhÃ´ng pháº£i ai trong chÃºng ta cÅ©ng Ä‘á»§ tá»± tin Ä‘á»ƒ nÃ³i lÃªn tÃ¢m chÃ¢n tÃ¬nh hay nhá»¯ng lá»i yÃªu thÆ°Æ¡ng tá»›i nhá»¯ng ngÆ°á»i mÃ  ta trÃ¢n trá»ng. ChÃºng chá»‰ vÃ¬ ngáº¡i, vÃ¬ sá»£ máº¥t Ä‘i Ä‘iá»u quÃ½ giÃ¡, hay Ä‘Æ¡n giáº£n lÃ  chÆ°a tÃ¬m Ä‘Æ°á»£c cÃ¡ch nÃ³i raâ€¦ nÃªn chÃºng ta Ä‘Ã nh giáº¥u trong tim, Ä‘á»ƒ rá»“i tiáº¿c nuá»‘i.</p>
      <p>Äá»«ng Ä‘á»ƒ nhá»¯ng thÆ°Æ¡ng yÃªu áº¥y láº¡i má»™t láº§n ná»¯a lá»¡ nhá»‹p. ChÃºng mÃ¬nh á»Ÿ Ä‘Ã¢y, lÃ  "há»™p thÆ° yÃªu thÆ°Æ¡ng" sáºµn sÃ ng giÃºp báº¡n gá»­i gáº¯m nhá»¯ng lá»i chÆ°a ká»‹p nÃ³i, Ä‘áº¿n Ä‘Ãºng ngÆ°á»i - vÃ  hoÃ n toÃ n áº©n danh náº¿u báº¡n muá»‘n.</p>
      <p>ChÃºng mÃ¬nh Ä‘áº£m báº£o giá»¯ kÃ­n má»i thÃ´ng tin cá»§a báº¡n vÃ  chá»‰ chia sáº» khi cÃ³ sá»± cho phÃ©p tá»« báº¡n.</p>
    </div>

    <div class="message-right">
      <form id="messageForm">
        <label for="senderName">NgÆ°á»i gá»­i:</label>
        <input type="text" id="senderName" placeholder="TÃªn báº¡n (hoáº·c Ä‘á»ƒ trá»‘ng náº¿u áº©n danh)">

        <label for="senderContact">LiÃªn há»‡ ngÆ°á»i gá»­i (SÄT / Email / IG / Zalo):</label>
        <input type="text" id="senderContact" placeholder="Báº¡n hÃ£y Ä‘á»ƒ láº¡i liÃªn há»‡ Ä‘á»ƒ chÃºng mÃ¬nh dá»… dÃ ng cáº­p nháº­t tráº¡ng thÃ¡i Lá»i nháº¯n nhÃ©!">


        <label><input type="checkbox" id="anonymous"> Gá»­i áº©n danh</label>

        <label for="receiverName">NgÆ°á»i nháº­n:</label>
        <input type="text" id="receiverName" required placeholder="TÃªn ngÆ°á»i nháº­n">

        <label for="receiverContact">LiÃªn há»‡ (SÄT, IG, Zalo...):</label>
        <input type="text" id="receiverContact" required placeholder="VD: IG: @nhamocmien">

        <label for="messageText">Lá»i nháº¯n:</label>
        <textarea id="messageText" required placeholder="Viáº¿t lá»i nháº¯n cá»§a báº¡n táº¡i Ä‘Ã¢y..."></textarea>

        <label for="storyText">Báº¡n cÃ³ muá»‘n chia sáº» vá» cÃ¢u chuyá»‡n cá»§a mÃ¬nh Ä‘áº¿n cá»™ng Ä‘á»“ng khÃ´ng?</label>
        <textarea id="storyText" rows="4" placeholder="(HÃ£y chia sáº» khi báº¡n thá»±c sá»± sÃ£n lÃ²ng nhÃ©!)"></textarea>

        <label for="mediaFile">File Ã¢m thanh / video / hÃ¬nh áº£nh:</label>
        <input type="file" id="mediaFile" accept="audio/*,video/*,image/*" multiple>
        <div id="fileList"></div>

        <button type="submit" id="sendBtn">ğŸ Gá»­i lá»i nháº¯n </button>

        <div id="progressContainer">
          <div id="progressText">ğŸ Äang gá»­i lá»i nháº¯n ...</div>
          <progress id="progressBar" value="0" max="100"></progress>
        </div>
        <p class="error" id="errorMsg"></p>
      </form>
    </div>
  </div>
  </section>


  <section id="feedback" class="section feedback-section">
  <h2 class="section-title">Feedback & ÄÃ¡nh giÃ¡</h2>
  <div class="feedback-wrapper">
    <button class="feedback-nav left" onclick="scrollFeedbackLeft()"><i class="fas fa-chevron-left"></i></button>

    <div class="feedback-container" id="feedbackList">
      <div class="feedback-card">
        <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
        <div class="feedback-img"></div>
        <p class="feedback-text">Mua táº·ng máº¹ vÃ  ráº¥t Æ°ng. Bá»™ quáº§n Ã¡o máº·c mÃ¡t, thoáº£i mÃ¡i...</p>
        <div class="feedback-name">Sinh ThÃ¡i</div>
      </div>

      <div class="feedback-card">
        <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
        <div class="feedback-img">
          
        </div>
        <p class="feedback-text">Cáº£m Æ¡n shop Ä‘Ã£ giÃºp mÃ¬nh gá»­i quÃ  cho ngÆ°á»i yÃªu á»Ÿ xa...</p>
        <div class="feedback-name">HoÃ ng ThÃ nh</div>
      </div>

      <div class="feedback-card">
        <div class="stars">â˜…â˜…â˜…â˜…â˜…</div>
        <div class="feedback-img">
          <img src="img/feedback.jpg" alt="áº¢nh ngÆ°á»i dÃ¹ng">
        </div>
        <p class="feedback-text">Set quÃ  ráº¥t Ã½ nghÄ©a Ä‘á»ƒ tá»± thÆ°á»Ÿng cho báº£n thÃ¢n...</p>
        <div class="feedback-name">Thanh TrÃ </div>
      </div>
    </div>

    <button class="feedback-nav right" onclick="scrollFeedbackRight()"><i class="fas fa-chevron-right"></i></button>
  </div>
</section>


  <script>
    document.querySelector(".logo").addEventListener("click", function() {
    window.location.href = "index.html";
    });
  </script>
  <script src="script.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  
  <script>
    //lay product tu firebase
  const firebaseConfig = {
  apiKey: "AIzaSyAiH4JYhfOB-bKTX79zBHaNtxjyKIPBU4g",
  authDomain: "loichucyeuthuong2.firebaseapp.com",
  databaseURL: "https://loichucyeuthuong2-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "loichucyeuthuong2",
  storageBucket: "loichucyeuthuong2.firebasestorage.app",
  messagingSenderId: "159341375606",
  appId: "1:159341375606:web:2acf3b154135bbb0882f57"
};
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const productList = document.getElementById("productList");

  db.ref("products").once("value").then(snapshot => {
    snapshot.forEach(child => {
      const product = child.val();
      const imgUrl = product.images?.[0] || "https://via.placeholder.com/200x150?text=No+Image";

      const div = document.createElement("div");
      div.className = "product-card";
      div.innerHTML = `
      <a href="product-detail.html?id=${child.key}">
      <img src="${imgUrl}" alt="${product.name}">
      </a>
      <div class="product-header">
      <a class="product-name" href="product-detail.html?id=${child.key}">${product.name}</a>
      <div class="product-price">${parseInt(product.price).toLocaleString()}Ä‘</div>
      </div>
      <div class="product-desc">${product.desc}</div>
      <button class="buy-btn" onclick="window.location.href='product-detail.html?id=${child.key}'">MUA NGAY</button>
      `;

      productList.appendChild(div);
    });
  });
  </script>

   <script>
    const form = document.getElementById("messageForm");
    const sendBtn = document.getElementById("sendBtn");
    const progressBar = document.getElementById("progressBar");
    const errorMsg = document.getElementById("errorMsg");
    const fileInput = document.getElementById("mediaFile");
    const fileListDiv = document.getElementById("fileList");
    const successModal = document.getElementById("successModal");

    let selectedFiles = [];

    fileInput.addEventListener("change", () => {
      const newFiles = Array.from(fileInput.files);
      selectedFiles = selectedFiles.concat(newFiles);

      const seen = new Set();
      selectedFiles = selectedFiles.filter(file => {
        const key = file.name + file.size;
        if (seen.has(key)) return false;
        seen.add(key);
        return true;
      });

      const dt = new DataTransfer();
      selectedFiles.forEach(f => dt.items.add(f));
      fileInput.files = dt.files;

      updateFileList();
    });

    function updateFileList() {
      fileListDiv.innerHTML = "";
      selectedFiles.forEach((file, index) => {
        const item = document.createElement("div");
        item.className = "file-item";
        item.innerHTML = `
          <span>${file.name}</span>
          <button onclick="removeFile(${index})">âœ–</button>
        `;
        fileListDiv.appendChild(item);
      });
    }

    function removeFile(index) {
      selectedFiles.splice(index, 1);
      const dt = new DataTransfer();
      selectedFiles.forEach(f => dt.items.add(f));
      fileInput.files = dt.files;
      updateFileList();
    }

    function closeModal() {
      successModal.style.display = "none";
    }

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    sendBtn.disabled = true;
    document.getElementById("progressContainer").style.display = "block";
    progressBar.value = 10;
    errorMsg.textContent = "";

    const sender = document.getElementById("anonymous").checked ? "áº¨n danh" : document.getElementById("senderName").value.trim();
    const senderContact = document.getElementById("senderContact").value.trim();
    const receiver = document.getElementById("receiverName").value.trim();
    const contact = document.getElementById("receiverContact").value.trim();
    const message = document.getElementById("messageText").value.trim();
    const story = document.getElementById("storyText").value.trim();

    // âœ… Thay Ä‘á»•i ná»™i dung progressText
    const progressText = document.getElementById("progressText");
    progressText.textContent = `ğŸ ChÃºng tÃ´i sáº½ gá»­i giÃºp báº¡n tin nháº¯n Ä‘áº¿n "${receiver}" sá»›m nháº¥t`;

    if (!receiver || !message || !contact) {
      errorMsg.textContent = "Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin báº¯t buá»™c.";
      sendBtn.disabled = false;
      document.getElementById("progressContainer").style.display = "none";
      return;
    }

    try {
      const uploadedUrls = [];
      let uploadedCount = 0;

      for (const file of selectedFiles) {
        const formData = new FormData();
        formData.append("file", file);
        formData.append("upload_preset", "demo_unsigned");

        const res = await fetch("https://api.cloudinary.com/v1_1/dddplwb0o/auto/upload", {
          method: "POST",
          body: formData
        });

        const data = await res.json();
        if (!data.secure_url) throw new Error("Táº£i file lÃªn tháº¥t báº¡i.");
        uploadedUrls.push(data.secure_url);

        uploadedCount++;
        progressBar.value = 10 + Math.floor((uploadedCount / selectedFiles.length) * 80);
      }

      const newMsgRef = db.ref("messages").push();
      await newMsgRef.set({
        sender,
        senderContact,
        receiver,
        contact,
        message,
        story,
        files: uploadedUrls,
        timestamp: new Date().toISOString()
      });

      progressBar.value = 100;
      form.reset();
      fileListDiv.innerHTML = "";
      selectedFiles = [];

      // âœ… KhÃ´ng dÃ¹ng modal ná»¯a â€” chá»‰ hiá»ƒn thá»‹ text
      progressText.textContent = `ğŸ‰ Gá»­i thÃ nh cÃ´ng! ChÃºng tÃ´i sáº½ liÃªn há»‡ vá»›i "${receiver}" trong 24h.`;
    } catch (error) {
      console.error(error);
      errorMsg.textContent = "ÄÃ£ cÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i.";
    }

    sendBtn.disabled = false;
    setTimeout(() => {
      document.getElementById("progressContainer").style.display = "none";
    }, 4000);
  });
  </script>


</body>
</html>
